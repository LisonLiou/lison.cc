---
title: Ubuntu 20.04设置虚拟内存
tags:
  - 虚拟内存
categories:
  - Linux
author: Lison
img: ''
top: false
cover: false
coverImg: ''
toc: false
mathjax: false
summary: ''
date: 2024-04-03 10:33:48
desc:
keywords:
---

>
> 编译鸿蒙4.0源码，16G内存吸干，不增加硬件的前提下，试下扩展虚拟内
存。
>
<!--more-->

#### 1. 首先保证拥有足够的磁盘空间，虚拟内存不就是交换的磁盘空间，牺牲时间换取空间（打工不就是人肉换猪肉，我对这片土地没有任何感情）
```
df -h #查看你的分区有足够的空间
```

#### 2. 查看现有的虚拟内存
```
free -h
```

#### 3. 创建虚拟内存配置文件
```
mkdir swap && cd swap

# bs为块的大小, count为创建多少个块（我扩展了16G 16*1024）
sudo dd if=/dev/zero of=swapfile bs=1M count=16384

# 修改权限
sudo chmod 0600 swapfile

# 把生成的文件转换成swap文件
sudo mkswap swapfile

# 激活文件
sudo swapon swapfile

# 释放文件（如果需要的话）
sudo swapoff swapfile
```

#### 4. 完成后再次查看虚拟内存
```
free -h
```

#### 5. 开机自动挂载虚拟内存
```
sudo vim /etc/fstab

# 增加如下 [虚拟内存文件路径] swap swap defaults 0 0
# 比如我的路径
/home/lison/swap/swapfile swap swap defaults 0 0

```

#### 6. 完成

![](data:image/png;base64,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)